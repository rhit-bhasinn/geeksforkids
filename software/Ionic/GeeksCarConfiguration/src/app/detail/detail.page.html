<ion-header>
  <ion-toolbar>
    <ion-title>Geeks for Kids Configuration</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <p *ngIf="!isConnected">Not Connected</p>
  <p *ngIf="isConnected">Connected To: {{ id }}</p>
  <ion-button fill="outline" expand="full" (click)="subscribe()">Subscribe</ion-button>
  <ion-button fill="solid" expand="full" (click)="resetConfiguration()" color="primary">Reset Configuration</ion-button>
  <ion-button fill="solid" expand="full" (click)="getConfiguration()" color="primary">Get Configuration</ion-button>

  <form *ngIf="configuration !== undefined" (ngSubmit)="onSubmit()" #configurationForm="ngForm">
    <ion-list>
      <ion-item>
        <ion-label position="floating">Version</ion-label>
        <ion-input type="number" readonly id="version" [(ngModel)]="configuration.version" name="version"></ion-input>
      </ion-item>
      <ion-item-group>
        <ion-item-divider>
          <ion-label>Speed</ion-label>
        </ion-item-divider>
        <ion-item>
          <ion-label position="stacked">Max<br/>({{ configuration.maxSpeed }})</ion-label>
          <ion-range min="25" max="100" pin="true" color="secondary" id="maxSpeed" [(ngModel)]="configuration.maxSpeed" name="maxSpeed">
            <ion-label slot="start">25</ion-label>
            <ion-label slot="end">100</ion-label>
          </ion-range>
        </ion-item>
      </ion-item-group>
      <ion-item-group>
        <ion-item-divider>
          <ion-label>Steering Actuator</ion-label>
        </ion-item-divider>
        <ion-item>
          <ion-label position="stacked">Center<br/>({{ configuration.actuatorCenter }})</ion-label>
          <ion-range min="0" max="1023" pin="true" color="secondary" id="actuatorCenter" [(ngModel)]="configuration.actuatorCenter" name="actuatorCenter">
            <ion-label slot="start">0</ion-label>
            <ion-label slot="end">1023</ion-label>
          </ion-range>
        </ion-item>
        <ion-item>
          <ion-label position="stacked">Min<br/>({{ configuration.actuatorMin }})</ion-label>
          <ion-range min="0" max="1023" pin="true" color="secondary" id="actuatorMin" [(ngModel)]="configuration.actuatorMin" name="actuatorMin">
            <ion-label slot="start">0</ion-label>
            <ion-label slot="end">1023</ion-label>
          </ion-range>
        </ion-item>
        <ion-item>
          <ion-label position="stacked">Max<br/>({{ configuration.actuatorMax }})</ion-label>
          <ion-range min="0" max="1023" pin="true" color="secondary" id="actuatorMax" [(ngModel)]="configuration.actuatorMax" name="actuatorMax">
            <ion-label slot="start">0</ion-label>
            <ion-label slot="end">1023</ion-label>
          </ion-range>
        </ion-item>
      </ion-item-group>
      <ion-item>
        <ion-checkbox slot="start" id="useJoystick" [(ngModel)]="configuration.useJoystick" name="useJoystick"></ion-checkbox>
        &nbsp;Use Joystick
      </ion-item>
      <ion-item>
        <ion-checkbox id="invertJoystickX" [(ngModel)]="configuration.invertJoystickX" name="invertJoystickX"></ion-checkbox>
        &nbsp;Invert Joystick X
      </ion-item>
      <ion-item>
        <ion-label position="floating"></ion-label>
        <ion-checkbox id="invertJoystickY" [(ngModel)]="configuration.invertJoystickY" name="invertJoystickY"></ion-checkbox>
        &nbsp;Invert Joystick Y
      </ion-item>
      <ion-item>
        <ion-checkbox id="useRc" [(ngModel)]="configuration.useRc" name="useRc"></ion-checkbox>
        &nbsp;Use RC
      </ion-item>
      <ion-item-group>
        <ion-item-divider>
          <ion-label>Potentionmeter Steering and Go Button</ion-label>
        </ion-item-divider>
        <ion-item>
          <ion-checkbox id="usePotGo" [(ngModel)]="configuration.usePotGo" name="usePotGo"></ion-checkbox>
          &nbsp;Use Potentionmeter Steering and Go Button
        </ion-item>
        <ion-item>
          <ion-label position="stacked">Center<br/>({{ configuration.steeringPotCenter }})</ion-label>
          <ion-range min="0" max="1023" pin="true" color="secondary" id="steeringPotCenter" [(ngModel)]="configuration.steeringPotCenter" name="steeringPotCenter">
            <ion-label slot="start">0</ion-label>
            <ion-label slot="end">1023</ion-label>
          </ion-range>
        </ion-item>
        <ion-item>
          <ion-label position="stacked">Min<br/>({{ configuration.steeringPotMin }})</ion-label>
          <ion-range min="0" max="1023" pin="true" color="secondary" id="steeringPotMin" [(ngModel)]="configuration.steeringPotMin" name="steeringPotMin">
            <ion-label slot="start">0</ion-label>
            <ion-label slot="end">1023</ion-label>
          </ion-range>
        </ion-item>
        <ion-item>
          <ion-label position="stacked">Max<br/>({{ configuration.steeringPotMax }})</ion-label>
          <ion-range min="0" max="1023" pin="true" color="secondary" id="steeringPotMax" [(ngModel)]="configuration.steeringPotMax" name="steeringPotMax">
            <ion-label slot="start">0</ion-label>
            <ion-label slot="end">1023</ion-label>
          </ion-range>
        </ion-item>
      </ion-item-group>
    </ion-list>

    <ion-button type="submit" expand="full" fill="solid" [disabled]="configurationForm.invalid">Save Configuration</ion-button>
  </form>
</ion-content>
